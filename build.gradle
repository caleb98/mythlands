def updateStaticResources = tasks.register('updateStaticResources', Copy) {
    from './frontend/dist/'
    into './backend/src/main/resources/static/'
}

updateStaticResources.configure {
    mustRunAfter 'frontend:build'
    mustRunAfter 'frontend:buildDev'
}

def updateDist = tasks.register('updateDist', Copy) {
    from './backend/build/libs'
    into './build'
}

updateDist.configure {
    mustRunAfter 'backend:build'
}

tasks.register('dist', GradleBuild) {
    tasks = ['frontend:build', 'updateStaticResources', 'backend:build', 'updateDist']
}

tasks.register('distDev', GradleBuild) {
    tasks = ['frontend:buildDev', 'updateStaticResources', 'backend:build', 'updateDist']
}